## TCP (Transmission Control Protocol)

### μ—°κ²° μ§€ν–¥ν• ν”„λ΅ν† μ½

- **μ—°κ²° μ„¤μ • ν•„μ”**: λ°μ΄ν„° μ „μ†΅ μ „ 3-way handshakeλ΅ μ—°κ²° μλ¦½
- **μ—°κ²° μ μ§€**: ν†µμ‹  μ¤‘ μ—°κ²° μƒνƒλ¥Ό μ§€μ†μ μΌλ΅ κ΄€λ¦¬
- **μ—°κ²° μΆ…λ£**: 4-way handshakeλ΅ μ•μ „ν•κ² μ—°κ²° ν•΄μ 

### μ£Όμ” νΉμ§•

- **μ‹ λΆ°μ„± λ³΄μ¥** : λ°μ΄ν„° μ „μ†΅ μμ„ λ³΄μ¥, μ†μ‹¤ μ‹ μ¬μ‚¬μ©
- **νλ¦„ μ μ–΄ & νΌμ΅ μ μ–΄** : λ„¤νΈμ›ν¬ μƒν™©μ— λ”°λΌ μ „μ†΅ μ†λ„ μ΅°μ 
- **μ†λ„** : μƒλ€μ μΌλ΅ λλ¦Ό (μ¤λ²„ν—¤λ“ μ΅΄μ¬)
- **μ¤λ¥ κ²€μ¶ λ° μμ •**
    - μ²΄ν¬μ„¬μ„ ν†µν• λ°μ΄ν„° λ¬΄κ²°μ„± κ²€μ¦
    - μ¤λ¥ λ°μƒ μ‹ μ¬μ „μ†΅ μ”μ²­
- **μ‚¬μ© μμ‹** :  HTTP/HTTPS, μ΄λ©”μΌ(SMTP), νμΌ μ „μ†΅(FTP), μ›κ²© μ ‘μ†(SSH, Telnet)

---

## UDP (User Datagram Protocol)

### λΉ„μ—°κ²°ν• ν”„λ΅ν† μ½

- **μ—°κ²° μ„¤μ • λ¶ν•„μ”**: μ¦‰μ‹ λ°μ΄ν„° μ „μ†΅ κ°€λ¥
- **λ…λ¦½μ  ν¨ν‚· μ „μ†΅**: κ° ν¨ν‚·μ΄ λ…λ¦½μ μΌλ΅ μ²λ¦¬λ¨
- **μƒνƒ κ΄€λ¦¬ μ—†μ**: μ—°κ²° μƒνƒ μ •λ³΄λ¥Ό μ μ§€ν•μ§€ μ•μ

### μ£Όμ” νΉμ§•

- **λΉ λ¥Έ μ „μ†΅ μ†λ„** : μ—°κ²° μ„¤μ • μ—†μ΄ λ°”λ΅ λ°μ΄ν„° μ „μ†΅
    - μ—°κ²° μ„¤μ • κ³Όμ • μ—†μ
    - μµμ†ν•μ ν”„λ΅ν† μ½ μ¤λ²„ν—¤λ“
    - ν—¤λ” ν¬κΈ° μ‘μ (8λ°”μ΄νΈ κ³ μ •)
- **μ‹ λΆ°μ„± μ—†μ** : λ°μ΄ν„° μ†μ‹¤, μμ„ λ³΄μ¥ μ•λ¨
- **μ μ–΄ κΈ°λ¥ μ—†μ** : νλ¦„/νΌμ΅ μ μ–΄ μ—†μ
- **μ†λ„** : λΉ λ¦„ (μ¤λ²„ν—¤λ“ μ—†μ)
- **λΈλ΅λ“μΊμ¤νΈ/λ©€ν‹°μΊμ¤νΈ μ§€μ›**
    - 1:N ν†µμ‹  κ°€λ¥
    - λ™μ‹μ— μ—¬λ¬ μμ‹ μμ—κ² μ „μ†΅
- **μ‚¬μ© μμ‹** : μ‹¤μ‹κ°„ μ¤νΈλ¦¬λ°, μ¨λΌμΈ κ²μ„, DNS, VoIP

---

### TCP vs UDP μ„ νƒ κΈ°μ¤€

| κΈ°μ¤€ | TCP μ„ νƒ | UDP μ„ νƒ |
| --- | --- | --- |
| λ°μ΄ν„° μ •ν™•μ„± | ν•„μ | μ¤‘μ”ν•μ§€ μ•μ |
| μ „μ†΅ μ†λ„ | μƒκ΄€μ—†μ | λ§¤μ° μ¤‘μ” |
| μμ„ λ³΄μ¥ | ν•„μ” | λ¶ν•„μ” |
| μ‹¤μ‹κ°„μ„± | λ¶ν•„μ” | ν•„μ |
| λ„¤νΈμ›ν¬ μƒνƒ | λ¶μ•μ • | μ•μ •μ  |

π‘‰ TCPλ” μ‹ λΆ°μ„±(μ •ν™•μ„±)μ΄ μ¤‘μ”ν•  λ•, UDPλ” μ†λ„κ°€ μ¤‘μ”ν•  λ• μ‚¬μ©

---

## TCP μ μ–΄ λ©”μ»¤λ‹μ¦

### 3-Way Handshake

λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κΈ° μ „μ— λ¨Όμ € μ •ν™•ν• μ „μ†΅μ„ λ³΄μ¥ν•κΈ° μ„ν•΄ μƒλ€λ°© μ»΄ν“¨ν„°μ™€ μ‚¬μ „μ— μ„Έμ…μ„ μλ¦½

<img width="500"  alt="Image" src="https://github.com/user-attachments/assets/a84b8064-e982-46b5-8aeb-2c792b1967c7" />

### κ³Όμ •

**1λ‹¨κ³„: SYN (ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„)**

- ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²° μ”μ²­
    - ν΄λΌμ΄μ–ΈνΈ μƒνƒ : **CLOSED β†’ SYN_SENT**
- SYN ν”λκ·Έλ¥Ό 1λ΅ μ„¤μ •ν•κ³  μ΄κΈ° μμ„ λ²νΈ(Sequence Number) μ „μ†΅

**2λ‹¨κ³„: SYN-ACK (μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ)**

- μ„λ²„κ°€ μ”μ²­μ„ μλ½
    - μ„λ²„ μƒνƒ : **LISTEN β†’ SYN_RECEIVED**
- SYN + ACK ν”λκ·Έλ¥Ό 1λ΅ μ„¤μ •
- μ„λ²„μ μ΄κΈ° μμ„ λ²νΈ μ „μ†΅ + ν΄λΌμ΄μ–ΈνΈ μμ„ λ²νΈμ— 1μ„ λ”ν• κ°’(ACK) μ „μ†΅

**3λ‹¨κ³„: ACK (ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„)**

- ν΄λΌμ΄μ–ΈνΈκ°€ μµμΆ… ν™•μΈ
    - ν΄λΌμ΄μ–ΈνΈ μƒνƒ : **SYN_SENT β†’ ESTABLISHED**
    - μ„λ²„ μƒνƒ : **SYN_RECEIVED β†’ ESTABLISHED**
- ACK ν”λκ·Έλ¥Ό 1λ΅ μ„¤μ •ν•κ³  μ„λ²„ μμ„ λ²νΈμ— 1μ„ λ”ν• κ°’ μ „μ†΅
- μ΄ν›„ μ—°κ²° μ„±λ¦½, λ°μ΄ν„° μ „μ†΅ μ‹μ‘

### λ©μ 

- **μ–‘λ°©ν–¥ ν†µμ‹  ν™•μΈ**: μ†΅μμ‹  λ¥λ ¥ κ²€μ¦
- **μ΄κΈ° μμ„ λ²νΈ λ™κΈ°ν™”**: λ°μ΄ν„° μμ„ κ΄€λ¦¬ μ¤€λΉ„
- **λ¦¬μ†μ¤ ν• λ‹Ή**: λ²„νΌ λ° μ—°κ²° μƒνƒ μ •λ³΄ ν• λ‹Ή
- **λ³΄μ•**: SYN Flooding κ³µκ²© λ°©μ§€λ¥Ό μ„ν• λ©”μ»¤λ‹μ¦ μ κ³µ

### μ‹¤ν¨ μ‹λ‚λ¦¬μ¤

- **SYN μ†μ‹¤**: ν΄λΌμ΄μ–ΈνΈκ°€ μ¬μ „μ†΅ (λ³΄ν†µ 3μ΄ ν›„)
- **SYN-ACK μ†μ‹¤**: μ„λ²„κ°€ μ¬μ „μ†΅
- **ACK μ†μ‹¤**: μ„λ²„κ°€ νƒ€μ„μ•„μ›ƒ ν›„ μ—°κ²° μΆ…λ£

### 4-Way Handshake (μ—°κ²° μΆ…λ£)

μ„Έμ…μ„ μΆ…λ£ν•κΈ° μ„ν•΄ μν–‰λλ” μ μ°¨

<img width="600"  alt="Image" src="https://github.com/user-attachments/assets/3458d74c-e284-41e2-9700-288dec145d5f" />

### κ³Όμ •

**1λ‹¨κ³„: FIN (ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„)**

- ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²° ν•΄μ  μ”μ²­
    - ν΄λΌμ΄μ–ΈνΈ μƒνƒ : **ESTABLISHED β†’ FIN_WAIT_1**
- FIN ν”λκ·Έ μ „μ†΅

**2λ‹¨κ³„: ACK (μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ)**

- μ„λ²„κ°€ μ”μ²­μ„ ν™•μΈ
    - μ„λ²„ μƒνƒ : **ESTABLISHED β†’ CLOSE_WAIT**
    - ν΄λΌμ΄μ–ΈνΈ μƒνƒ : **FIN_WAIT_1 β†’ FIN_WAIT_2**
- ACK μ „μ†΅ (μ•„μ§ μ„λ²„λ” λ°μ΄ν„° μ „μ†΅ κ°€λ¥)

**3λ‹¨κ³„: FIN (μ„λ²„ β†’ ν΄λΌμ΄μ–ΈνΈ)**

- μ„λ²„κ°€ μ”μ²­μ„ μλ½
    - μ„λ²„ μƒνƒ: **CLOSE_WAIT β†’ LAST_ACK**
    - ν΄λΌμ΄μ–ΈνΈ μƒνƒ: **FIN_WAIT_2 β†’ TIME_WAIT**

**4λ‹¨κ³„: ACK (ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„)**

- ν΄λΌμ΄μ–ΈνΈκ°€ μµμΆ… ν™•μΈ
    - μ„λ²„ μƒνƒ: LAST_ACK β†’ CLOSED
    - ν΄λΌμ΄μ–ΈνΈ μƒνƒ: TIME_WAIT β†’ CLOSED (μΌμ • μ‹κ°„ ν›„)

### TIME_WAIT μƒνƒ

- **λ€κΈ° μ‹κ°„**: λ³΄ν†µ 2 Γ— MSL (Maximum Segment Lifetime, μ•½ 30μ΄~2λ¶„)
- **λ©μ **:
    - λ§μ§€λ§‰ ACKκ°€ μ†μ‹¤λ  κ²½μ° μ¬μ „μ†΅ λ€μ‘
    - μ§€μ—°λ ν¨ν‚·μ΄ μƒ μ—°κ²°κ³Ό μ„μ΄λ” κ²ƒ λ°©μ§€
    - μ΄μ „ μ—°κ²°μ λ¨λ“  ν¨ν‚·μ΄ λ„¤νΈμ›ν¬μ—μ„ μ†λ©Έλλ„λ΅ λ³΄μ¥

### Half-Close

- ν•μ½λ§ FINμ„ λ³΄λ‚΄ μ†΅μ‹ λ§ μΆ…λ£ν•κ³  μμ‹ μ€ μ μ§€ κ°€λ¥
- μ„λ²„κ°€ λ‚¨μ€ λ°μ΄ν„°λ¥Ό κ³„μ† λ³΄λ‚Ό μ μμ

## λ©΄μ ‘ λ€λΉ„ ν•µμ‹¬ ν¬μΈνΈ

**Q: TCPμ™€ UDPμ κ°€μ¥ ν° μ°¨μ΄λ”?**<br>
A: TCPλ” μ—°κ²° μ§€ν–¥μ μ΄κ³  μ‹ λΆ°μ„±μ„ λ³΄μ¥ν•μ§€λ§ λλ¦¬κ³ , UDPλ” λΉ„μ—°κ²°ν•μΌλ΅ λΉ λ¥΄μ§€λ§ μ‹ λΆ°μ„±μ΄ μ—†μµλ‹λ‹¤.

**Q: 3-way handshakeκ°€ μ™ 3λ‹¨κ³„μΈκ°€μ”?**<br>
A: μ–‘λ°©ν–¥ ν†µμ‹ μ„ ν™•μΈν•κ³  μ΄κΈ° μμ„ λ²νΈλ¥Ό λ™κΈ°ν™”ν•κΈ° μ„ν•΄μ„μ…λ‹λ‹¤. 2λ‹¨κ³„λ΅λ” ν΄λΌμ΄μ–ΈνΈμ μμ‹  λ¥λ ¥μ„ ν™•μΈν•  μ μ—†κ³ , 1λ‹¨κ³„ λ” μ¶”κ°€ν•λ” κ²ƒμ€ λ¶ν•„μ”ν•©λ‹λ‹¤.

**Q: TIME_WAITμ΄ μ™ ν•„μ”ν•κ°€μ”?**<br>
A: λ§μ§€λ§‰ ACKμ μ†μ‹¤μ— λ€λΉ„ν•κ³ , μ§€μ—°λ ν¨ν‚·μ΄ μƒ μ—°κ²°κ³Ό μ„μ΄λ” κ²ƒμ„ λ°©μ§€ν•κΈ° μ„ν•΄μ„μ…λ‹λ‹¤.
